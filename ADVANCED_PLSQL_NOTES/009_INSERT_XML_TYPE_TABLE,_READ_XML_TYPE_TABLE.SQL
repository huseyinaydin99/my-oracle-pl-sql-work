CREATE TABLE EMP_XML OF XMLTYPE; --XML TIPLI TABLE OLUSTURUR

DECLARE
    D_XMLTYPE XMLTYPE;
BEGIN
    SELECT SYS_XMLAGG(
        XMLELEMENT("EMP",
            XMLFOREST(
                E.EMPNO, E.ENAME, E.SAL, E.COMM
            )
        )
    )
    INTO D_XMLTYPE
    FROM EMP E;

    INSERT
    INTO EMP_XML
    VALUES(
        D_XMLTYPE
    );

    COMMIT;
END;

DESC EMP_XML;

DROP TABLE EMP_XML;

SELECT X.GETCLOBVAL()
FROM EMP_XML X;
