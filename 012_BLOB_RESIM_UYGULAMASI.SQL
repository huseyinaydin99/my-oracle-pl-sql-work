CREATE TABLE RESIMLER(
  DOSYA_ADI VARCHAR2(100) PRIMARY KEY,
  RESIM BLOB
);

-- SYS ILE DIRECTORY CREATE EDECEĞİZ
-- SYS ILE CONNECT OL

CREATE DIRECTORY IMAGE_DIR AS 'C:\Users\Huseyin_Aydin\Pictures';
GRANT READ, WRITE ON DIRECTORY IMAGE_DIR TO HR;


--TEKRAR HR ILE CONNECT OL

DECLARE
  FOTO BFILE;
  TEMPDATA BLOB;
  KAYNAKOFFSET PLS_INTEGER := 1;
  HEDEHOFFSET PLS_INTEGER := 1;
  DOSYA_ISMI VARCHAR(31) := 'windows-98-xptq17rp365hfyqr.jpg';
BEGIN
  DBMS_LOB.CREATETEMPORARY(TEMPDATA, TRUE); --<< TEMPDATA DEĞİŞKENİNE GEÇİCİ ALAN AÇAR
  FOTO := BFILENAME('IMAGE_DIR', DOSYA_ISMI);
  DBMS_LOB.FILEOPEN(FOTO, DBMS_LOB.FILE_READONLY);
  DBMS_LOB.LOADFROMFILE(TEMPDATA, FOTO, DBMS_LOB.LOBMAXSIZE, HEDEHOFFSET, KAYNAKOFFSET);

  INSERT INTO RESIMLER(
    DOSYA_ADI,
    RESIM
  )
  VALUES(
    DOSYA_ISMI,
    TEMPDATA
  );
  COMMIT;
  DBMS_LOB.FILECLOSE(FOTO);
END;

SELECT * FROM RESIMLER;
